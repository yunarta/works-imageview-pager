buildscript {
    repositories {
        maven { url 'https://client-ci.vcube.sg:8081/artifactory/blackhole/' }
    }

    dependencies {
        classpath 'com.google.gms:google-services:3.0.0'
        classpath 'io.fabric.tools:gradle:1.22.1'
    }
}

apply plugin: 'com.android.library'
apply plugin: 'me.tatarka.retrolambda'
apply plugin: 'net.ltgt.errorprone'
apply plugin: 'pmd'

check.dependsOn 'pmd'

android {
    compileSdkVersion rootProject.ext.compileSdkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion

    defaultConfig {
        minSdkVersion 9
        targetSdkVersion rootProject.ext.targetSdkVersion
        versionCode 1
        versionName "1.0"
    }

    compileOptions {
        incremental true
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    buildTypes {
        release {

        }
    }
}

configurations.errorprone {
    resolutionStrategy.force 'com.google.errorprone:error_prone_core:2.0.15'
}

task pmd(type: Pmd) {
    ignoreFailures = false
    ruleSetFiles = files("pmd.xml")

    source 'src'
    include '**/*.java'
    exclude '**/gen/**'

    reports {
        xml.enabled = false
        html.enabled = true
        html {
            destination "$project.buildDir/reports/pmd/pmd.html"
        }
    }
    pmd { toolVersion = '5.1.3' }
}

retrolambda {
    javaVersion JavaVersion.VERSION_1_7
    defaultMethods true
    incremental true
}

dependencies {
    compile 'com.android.support:support-v4:' + rootProject.ext.supportLibVersion

    // Fresco
    provided ('com.facebook.fresco:fresco:1.1.0')
    provided ('com.facebook.fresco:drawee:1.1.0')
    provided ('com.facebook.fresco:imagepipeline-base:1.1.0')
    provided ('com.facebook.fresco:imagepipeline:1.1.0')

    // Need by fresco
    provided 'com.facebook.fresco:fbcore:1.1.0'
    provided 'com.facebook.fresco:animated-gif:1.1.0'

    provided 'jp.co.vcube.android.ux:fresco:1.0.5'
}